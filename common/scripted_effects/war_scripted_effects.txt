save_ruler_stats = {
	hidden_effect = {
		export_to_variable = {
			variable_name = ruler_adm
			value = ADM
		}
		export_to_variable = {
			variable_name = ruler_dip
			value = DIP
		}
		export_to_variable = {
			variable_name = ruler_mil
			value = MIL
		}
	}	
}

restore_ruler_stats = {
	custom_tooltip = restore_reviver_stats
	
	hidden_effect = {
		set_variable = {
			which = ruler_adm_temp 
			which = ruler_adm 
		}
		set_variable = {
			which = ruler_dip_temp 
			which = ruler_dip
		}
		set_variable = {
			which = ruler_mil_temp 
			which = ruler_mil 
		}
		change_adm = -6
		change_dip = -6
		change_mil = -6
		clr_country_flag = reviving_ruler
	}
	
	while = {
		limit = {
			check_variable = {
				which = ruler_adm_temp
				value = 1
			}
		}
		change_adm = 1
		subtract_variable = {
			which = ruler_adm_temp
			value = 1
		}
	}

	while = {
		limit = {
			check_variable = {
				which = ruler_dip_temp
				value = 1
			}
		}
		change_dip = 1
		subtract_variable = {
			which = ruler_dip_temp
			value = 1
		}
	}
	
	while = {
		limit = {
			check_variable = {
				which = ruler_mil_temp
				value = 1
			}
		}
		change_mil = 1
		subtract_variable = {
			which = ruler_mil_temp
			value = 1
		}
	}
}

revival_stat_loss = {
		random_list = {
			40 = { change_adm = -1 change_dip = -1 change_mil = -1 }
			20 = { change_adm = -1 }
			20 = { change_dip = -1 }
			20 = { change_mil = -1 }
		}
}

clear_ruler_personalities = {
	custom_tooltip = clear_ruler_personalities_tt
	hidden_effect = {
		remove_ruler_personality = just_personality
		remove_ruler_personality = righteous_personality
		remove_ruler_personality = tolerant_personality
		remove_ruler_personality = kind_hearted_personality
		remove_ruler_personality = free_thinker_personality
		remove_ruler_personality = well_connected_personality
		remove_ruler_personality = calm_personality
		remove_ruler_personality = careful_personality
		remove_ruler_personality = secretive_personality
		remove_ruler_personality = intricate_web_weaver_personality
		remove_ruler_personality = fertile_personality
		remove_ruler_personality = well_advised_personality
		remove_ruler_personality = benevolent_personality
		remove_ruler_personality = zealot_personality
		remove_ruler_personality = pious_personality
		remove_ruler_personality = lawgiver_personality
		remove_ruler_personality = midas_touched_personality
		remove_ruler_personality = incorruptible_personality
		remove_ruler_personality = architectural_visionary_personality
		remove_ruler_personality = scholar_personality
		remove_ruler_personality = entrepreneur_personality
		remove_ruler_personality = industrious_personality
		remove_ruler_personality = expansionist_personality
		remove_ruler_personality = charismatic_negotiator_personality
		remove_ruler_personality = silver_tongue_personality
		remove_ruler_personality = conqueror_personality
		remove_ruler_personality = tactical_genius_personality
		remove_ruler_personality = bold_fighter_personality
		remove_ruler_personality = strict_personality
		remove_ruler_personality = inspiring_leader_personality
		remove_ruler_personality = martial_educator_personality
		remove_ruler_personality = navigator_personality
		remove_ruler_personality = fierce_negotiator_personality
		remove_ruler_personality = babbling_buffoon_personality
		remove_ruler_personality = embezzler_personality
		remove_ruler_personality = infertile_personality
		remove_ruler_personality = drunkard_personality
		remove_ruler_personality = sinner_personality
		remove_ruler_personality = greedy_personality
		remove_ruler_personality = reformist_personality
		remove_ruler_personality = cruel_personality
		remove_ruler_personality = naive_personality
		remove_ruler_personality = craven_personality
		remove_ruler_personality = loose_lips_personality
		remove_ruler_personality = obsessive_perfectionist_personality
		remove_ruler_personality = malevolent_personality
		remove_ruler_personality = immortal_personality
		remove_ruler_personality = humane_personality
		remove_ruler_personality = petty_personality
		remove_ruler_personality = patron_of_arts_personality
		remove_ruler_personality = legendary_pirate_personality
	}
}


save_ruler_personalities = {
	clear_saved_ruler_personalities = yes
	if = { limit = { ruler_has_personality = just_personality } set_ruler_flag = just_personality_flag }
	if = { limit = { ruler_has_personality = righteous_personality } set_ruler_flag = righteous_personality_flag }
	if = { limit = { ruler_has_personality = tolerant_personality } set_ruler_flag = tolerant_personality_flag }
	if = { limit = { ruler_has_personality = kind_hearted_personality } set_ruler_flag = kind_hearted_personality_flag }
	if = { limit = { ruler_has_personality = free_thinker_personality } set_ruler_flag = free_thinker_personality_flag }
	if = { limit = { ruler_has_personality = well_connected_personality } set_ruler_flag = well_connected_personality_flag }
	if = { limit = { ruler_has_personality = calm_personality } set_ruler_flag = calm_personality_flag }
	if = { limit = { ruler_has_personality = careful_personality } set_ruler_flag = careful_personality_flag }
	if = { limit = { ruler_has_personality = secretive_personality } set_ruler_flag = secretive_personality_flag }
	if = { limit = { ruler_has_personality = intricate_web_weaver_personality } set_ruler_flag = intricate_web_weaver_personality_flag }
	if = { limit = { ruler_has_personality = fertile_personality } set_ruler_flag = fertile_personality_flag }
	if = { limit = { ruler_has_personality = well_advised_personality } set_ruler_flag = well_advised_personality_flag }
	if = { limit = { ruler_has_personality = benevolent_personality } set_ruler_flag = benevolent_personality_flag }
	if = { limit = { ruler_has_personality = zealot_personality } set_ruler_flag = zealot_personality_flag }
	if = { limit = { ruler_has_personality = pious_personality } set_ruler_flag = pious_personality_flag }
	if = { limit = { ruler_has_personality = lawgiver_personality } set_ruler_flag = lawgiver_personality_flag }
	if = { limit = { ruler_has_personality = midas_touched_personality } set_ruler_flag = midas_touched_personality_flag }
	if = { limit = { ruler_has_personality = incorruptible_personality } set_ruler_flag = incorruptible_personality_flag }
	if = { limit = { ruler_has_personality = architectural_visionary_personality } set_ruler_flag = architectural_visionary_personality_flag }
	if = { limit = { ruler_has_personality = scholar_personality } set_ruler_flag = scholar_personality_flag }
	if = { limit = { ruler_has_personality = entrepreneur_personality } set_ruler_flag = entrepreneur_personality_flag }
	if = { limit = { ruler_has_personality = industrious_personality } set_ruler_flag = industrious_personality_flag }
	if = { limit = { ruler_has_personality = expansionist_personality } set_ruler_flag = expansionist_personality_flag }
	if = { limit = { ruler_has_personality = charismatic_negotiator_personality } set_ruler_flag = charismatic_negotiator_personality_flag }
	if = { limit = { ruler_has_personality = conqueror_personality } set_ruler_flag = conqueror_personality_flag }
	if = { limit = { ruler_has_personality = silver_tongue_personality } set_ruler_flag = silver_tongue_personality_flag }
	if = { limit = { ruler_has_personality = tactical_genius_personality } set_ruler_flag = tactical_genius_personality_flag }
	if = { limit = { ruler_has_personality = bold_fighter_personality } set_ruler_flag = bold_fighter_personality_flag }
	if = { limit = { ruler_has_personality = strict_personality } set_ruler_flag = strict_personality_flag }
	if = { limit = { ruler_has_personality = inspiring_leader_personality } set_ruler_flag = inspiring_leader_personality_flag }
	if = { limit = { ruler_has_personality = martial_educator_personality } set_ruler_flag = martial_educator_personality_flag }
	if = { limit = { ruler_has_personality = navigator_personality } set_ruler_flag = navigator_personality_flag }
	if = { limit = { ruler_has_personality = fierce_negotiator_personality } set_ruler_flag = fierce_negotiator_personality_flag }
	if = { limit = { ruler_has_personality = babbling_buffoon_personality } set_ruler_flag = babbling_buffoon_personality_flag }
	if = { limit = { ruler_has_personality = embezzler_personality } set_ruler_flag = embezzler_personality_flag }
	if = { limit = { ruler_has_personality = infertile_personality } set_ruler_flag = infertile_personality_flag }
	if = { limit = { ruler_has_personality = drunkard_personality } set_ruler_flag = drunkard_personality_flag }
	if = { limit = { ruler_has_personality = sinner_personality } set_ruler_flag = sinner_personality_flag }
	if = { limit = { ruler_has_personality = greedy_personality } set_ruler_flag = greedy_personality_flag }
	if = { limit = { ruler_has_personality = cruel_personality } set_ruler_flag = cruel_personality_flag }
	if = { limit = { ruler_has_personality = craven_personality } set_ruler_flag = craven_personality_flag }
	if = { limit = { ruler_has_personality = naive_personality } set_ruler_flag = naive_personality_flag }
	if = { limit = { ruler_has_personality = loose_lips_personality } set_ruler_flag = loose_lips_personality_flag }
	if = { limit = { ruler_has_personality = obsessive_perfectionist_personality } set_ruler_flag = obsessive_perfectionist_personality_flag }
	if = { limit = { ruler_has_personality = malevolent_personality } set_ruler_flag = malevolent_personality_flag }
	if = { limit = { ruler_has_personality = legendary_pirate_personality } set_ruler_flag = legendary_pirate_personality_flag }
	if = { limit = { ruler_has_personality = humane_personality } set_ruler_flag = humane_personality_flag }
	if = { limit = { ruler_has_personality = petty_personality } set_ruler_flag = petty_personality_flag }
	if = { limit = { ruler_has_personality = reformist_personality } set_ruler_flag = reformist_personality_flag }
	if = { limit = { ruler_has_personality = patron_of_arts_personality } set_ruler_flag = patron_of_arts_personality_flag }
	}

clear_saved_ruler_personalities = {
	clr_ruler_flag = just_personality_flag
	clr_ruler_flag = righteous_personality_flag
	clr_ruler_flag = tolerant_personality_flag
	clr_ruler_flag = kind_hearted_personality_flag
	clr_ruler_flag = free_thinker_personality_flag
	clr_ruler_flag = well_connected_personality_flag
	clr_ruler_flag = calm_personality_flag
	clr_ruler_flag = careful_personality_flag
	clr_ruler_flag = secretive_personality_flag
	clr_ruler_flag = intricate_web_weaver_personality_flag
	clr_ruler_flag = fertile_personality_flag
	clr_ruler_flag = well_advised_personality_flag
	clr_ruler_flag = benevolent_personality_flag
	clr_ruler_flag = zealot_personality_flag
	clr_ruler_flag = pious_personality_flag
	clr_ruler_flag = lawgiver_personality_flag
	clr_ruler_flag = midas_touched_personality_flag
	clr_ruler_flag = incorruptible_personality_flag
	clr_ruler_flag = architectural_visionary_personality_flag
	clr_ruler_flag = scholar_personality_flag
	clr_ruler_flag = entrepreneur_personality_flag
	clr_ruler_flag = industrious_personality_flag
	clr_ruler_flag = expansionist_personality_flag
	clr_ruler_flag = charismatic_negotiator_personality_flag
	clr_ruler_flag = conqueror_personality_flag
	clr_ruler_flag = silver_tongue_personality_flag
	clr_ruler_flag = tactical_genius_personality_flag
	clr_ruler_flag = bold_fighter_personality_flag
	clr_ruler_flag = strict_personality_flag
	clr_ruler_flag = inspiring_leader_personality_flag
	clr_ruler_flag = martial_educator_personality_flag
	clr_ruler_flag = navigator_personality_flag
	clr_ruler_flag = fierce_negotiator_personality_flag
	clr_ruler_flag = babbling_buffoon_personality_flag
	clr_ruler_flag = embezzler_personality_flag
	clr_ruler_flag = infertile_personality_flag
	clr_ruler_flag = drunkard_personality_flag
	clr_ruler_flag = sinner_personality_flag
	clr_ruler_flag = greedy_personality_flag
	clr_ruler_flag = cruel_personality_flag
	clr_ruler_flag = craven_personality_flag
	clr_ruler_flag = naive_personality_flag
	clr_ruler_flag = loose_lips_personality_flag
	clr_ruler_flag = obsessive_perfectionist_personality_flag
	clr_ruler_flag = malevolent_personality_flag
	clr_ruler_flag = legendary_pirate_personality_flag
	clr_ruler_flag = humane_personality_flag
	clr_ruler_flag = petty_personality_flag
	clr_ruler_flag = reformist_personality_flag
	clr_ruler_flag = patron_of_arts_personality_flag
	clr_ruler_flag = mage_personality_flag
	clr_ruler_flag = great_conqueror_personality_flag
	clr_ruler_flag = mythical_conqueror_personality_flag
	clr_ruler_flag = xhazobs_chosen_personality_flag
	clr_ruler_flag = mongoose_shifter_personality_flag
	clr_ruler_flag = leopard_shifter_personality_flag
	clr_ruler_flag = elephant_shifter_personality_flag
}

apply_saved_ruler_personalities = {
	if = { limit = { has_ruler_flag = legendary_pirate_personality_flag } add_ruler_personality = legendary_pirate_personality clr_ruler_flag = legendary_pirate_personality_flag }
	if = { limit = { has_ruler_flag = legendary_pirate_personality_flag } add_ruler_personality = legendary_pirate_personality clr_ruler_flag = legendary_pirate_personality_flag }
	if = { limit = { has_ruler_flag = just_personality_flag } add_ruler_personality = just_personality clr_ruler_flag = just_personality_flag }
	if = { limit = { has_ruler_flag = righteous_personality_flag } add_ruler_personality = righteous_personality clr_ruler_flag = righteous_personality_flag }
	if = { limit = { has_ruler_flag = tolerant_personality_flag } add_ruler_personality = tolerant_personality clr_ruler_flag = tolerant_personality_flag }
	if = { limit = { has_ruler_flag = kind_hearted_personality_flag } add_ruler_personality = kind_hearted_personality clr_ruler_flag = kind_hearted_personality_flag }
	if = { limit = { has_ruler_flag = free_thinker_personality_flag } add_ruler_personality = free_thinker_personality clr_ruler_flag = free_thinker_personality_flag }
	if = { limit = { has_ruler_flag = well_connected_personality_flag } add_ruler_personality = well_connected_personality clr_ruler_flag = well_connected_personality_flag }
	if = { limit = { has_ruler_flag = calm_personality_flag } add_ruler_personality = calm_personality clr_ruler_flag = calm_personality_flag }
	if = { limit = { has_ruler_flag = careful_personality_flag } add_ruler_personality = careful_personality clr_ruler_flag = careful_personality_flag }
	if = { limit = { has_ruler_flag = secretive_personality_flag } add_ruler_personality = secretive_personality clr_ruler_flag = secretive_personality_flag }
	if = { limit = { has_ruler_flag = intricate_web_weaver_personality_flag } add_ruler_personality = intricate_web_weaver_personality clr_ruler_flag = intricate_web_weaver_personality_flag }
	if = { limit = { has_ruler_flag = fertile_personality_flag } add_ruler_personality = fertile_personality clr_ruler_flag = fertile_personality_flag }
	if = { limit = { has_ruler_flag = well_advised_personality_flag } add_ruler_personality = well_advised_personality clr_ruler_flag = well_advised_personality_flag }
	if = { limit = { has_ruler_flag = benevolent_personality_flag } add_ruler_personality = benevolent_personality clr_ruler_flag = benevolent_personality_flag }
	if = { limit = { has_ruler_flag = zealot_personality_flag } add_ruler_personality = zealot_personality clr_ruler_flag = zealot_personality_flag }
	if = { limit = { has_ruler_flag = pious_personality_flag } add_ruler_personality = pious_personality clr_ruler_flag = pious_personality_flag }
	if = { limit = { has_ruler_flag = lawgiver_personality_flag } add_ruler_personality = lawgiver_personality clr_ruler_flag = lawgiver_personality_flag }
	if = { limit = { has_ruler_flag = midas_touched_personality_flag } add_ruler_personality = midas_touched_personality clr_ruler_flag = midas_touched_personality_flag }
	if = { limit = { has_ruler_flag = incorruptible_personality_flag } add_ruler_personality = incorruptible_personality clr_ruler_flag = incorruptible_personality_flag }
	if = { limit = { has_ruler_flag = architectural_visionary_personality_flag } add_ruler_personality = architectural_visionary_personality clr_ruler_flag = architectural_visionary_personality_flag }
	if = { limit = { has_ruler_flag = scholar_personality_flag } add_ruler_personality = scholar_personality clr_ruler_flag = scholar_personality_flag }
	if = { limit = { has_ruler_flag = entrepreneur_personality_flag } add_ruler_personality = entrepreneur_personality clr_ruler_flag = entrepreneur_personality_flag }
	if = { limit = { has_ruler_flag = industrious_personality_flag } add_ruler_personality = industrious_personality clr_ruler_flag = industrious_personality_flag }
	if = { limit = { has_ruler_flag = expansionist_personality_flag } add_ruler_personality = expansionist_personality clr_ruler_flag = expansionist_personality_flag }
	if = { limit = { has_ruler_flag = charismatic_negotiator_personality_flag } add_ruler_personality = charismatic_negotiator_personality clr_ruler_flag = charismatic_negotiator_personality_flag }
	if = { limit = { has_ruler_flag = silver_tongue_personality_flag } add_ruler_personality = silver_tongue_personality clr_ruler_flag = silver_tongue_personality_flag }
	if = { limit = { has_ruler_flag = conqueror_personality_flag } add_ruler_personality = conqueror_personality clr_ruler_flag = conqueror_personality_flag }
	if = { limit = { has_ruler_flag = tactical_genius_personality_flag } add_ruler_personality = tactical_genius_personality clr_ruler_flag = tactical_genius_personality_flag }
	if = { limit = { has_ruler_flag = bold_fighter_personality_flag } add_ruler_personality = bold_fighter_personality clr_ruler_flag = bold_fighter_personality_flag }
	if = { limit = { has_ruler_flag = strict_personality_flag } add_ruler_personality = strict_personality clr_ruler_flag = strict_personality_flag }
	if = { limit = { has_ruler_flag = inspiring_leader_personality_flag } add_ruler_personality = inspiring_leader_personality clr_ruler_flag = inspiring_leader_personality_flag }
	if = { limit = { has_ruler_flag = martial_educator_personality_flag } add_ruler_personality = martial_educator_personality clr_ruler_flag = martial_educator_personality_flag }
	if = { limit = { has_ruler_flag = navigator_personality_flag } add_ruler_personality = navigator_personality clr_ruler_flag = navigator_personality_flag }
	if = { limit = { has_ruler_flag = fierce_negotiator_personality_flag } add_ruler_personality = fierce_negotiator_personality clr_ruler_flag = fierce_negotiator_personality_flag }
	if = { limit = { has_ruler_flag = babbling_buffoon_personality_flag } add_ruler_personality = babbling_buffoon_personality clr_ruler_flag = babbling_buffoon_personality_flag }
	if = { limit = { has_ruler_flag = embezzler_personality_flag } add_ruler_personality = embezzler_personality clr_ruler_flag = embezzler_personality_flag }
	if = { limit = { has_ruler_flag = infertile_personality_flag } add_ruler_personality = infertile_personality clr_ruler_flag = infertile_personality_flag }
	if = { limit = { has_ruler_flag = drunkard_personality_flag } add_ruler_personality = drunkard_personality clr_ruler_flag = drunkard_personality_flag }
	if = { limit = { has_ruler_flag = sinner_personality_flag } add_ruler_personality = sinner_personality clr_ruler_flag = sinner_personality_flag }
	if = { limit = { has_ruler_flag = greedy_personality_flag } add_ruler_personality = greedy_personality clr_ruler_flag = greedy_personality_flag }
	if = { limit = { has_ruler_flag = reformist_personality_flag } add_ruler_personality = reformist_personality clr_ruler_flag = reformist_personality_flag }
	if = { limit = { has_ruler_flag = cruel_personality_flag } add_ruler_personality = cruel_personality clr_ruler_flag = cruel_personality_flag }
	if = { limit = { has_ruler_flag = naive_personality_flag } add_ruler_personality = naive_personality clr_ruler_flag = naive_personality_flag }
	if = { limit = { has_ruler_flag = craven_personality_flag } add_ruler_personality = craven_personality clr_ruler_flag = craven_personality_flag }
	if = { limit = { has_ruler_flag = loose_lips_personality_flag } add_ruler_personality = loose_lips_personality clr_ruler_flag = loose_lips_personality_flag }
	if = { limit = { has_ruler_flag = obsessive_perfectionist_personality_flag } add_ruler_personality = obsessive_perfectionist_personality clr_ruler_flag = obsessive_perfectionist_personality_flag }
	if = { limit = { has_ruler_flag = malevolent_personality_flag } add_ruler_personality = malevolent_personality clr_ruler_flag = malevolent_personality_flag }
	if = { limit = { has_ruler_flag = humane_personality_flag } add_ruler_personality = humane_personality clr_ruler_flag = humane_personality_flag }
	if = { limit = { has_ruler_flag = petty_personality_flag } add_ruler_personality = petty_personality clr_ruler_flag = petty_personality_flag }
}

save_persistent_ruler_personalities = {
	clear_saved_persistent_ruler_personalities = yes
	if = { limit = { ruler_has_personality = just_personality } set_country_flag = just_personality_flag }
	if = { limit = { ruler_has_personality = righteous_personality } set_country_flag = righteous_personality_flag }
	if = { limit = { ruler_has_personality = tolerant_personality } set_country_flag = tolerant_personality_flag }
	if = { limit = { ruler_has_personality = kind_hearted_personality } set_country_flag = kind_hearted_personality_flag }
	if = { limit = { ruler_has_personality = free_thinker_personality } set_country_flag = free_thinker_personality_flag }
	if = { limit = { ruler_has_personality = well_connected_personality } set_country_flag = well_connected_personality_flag }
	if = { limit = { ruler_has_personality = calm_personality } set_country_flag = calm_personality_flag }
	if = { limit = { ruler_has_personality = careful_personality } set_country_flag = careful_personality_flag }
	if = { limit = { ruler_has_personality = secretive_personality } set_country_flag = secretive_personality_flag }
	if = { limit = { ruler_has_personality = intricate_web_weaver_personality } set_country_flag = intricate_web_weaver_personality_flag }
	if = { limit = { ruler_has_personality = fertile_personality } set_country_flag = fertile_personality_flag }
	if = { limit = { ruler_has_personality = well_advised_personality } set_country_flag = well_advised_personality_flag }
	if = { limit = { ruler_has_personality = benevolent_personality } set_country_flag = benevolent_personality_flag }
	if = { limit = { ruler_has_personality = zealot_personality } set_country_flag = zealot_personality_flag }
	if = { limit = { ruler_has_personality = pious_personality } set_country_flag = pious_personality_flag }
	if = { limit = { ruler_has_personality = lawgiver_personality } set_country_flag = lawgiver_personality_flag }
	if = { limit = { ruler_has_personality = midas_touched_personality } set_country_flag = midas_touched_personality_flag }
	if = { limit = { ruler_has_personality = incorruptible_personality } set_country_flag = incorruptible_personality_flag }
	if = { limit = { ruler_has_personality = architectural_visionary_personality } set_country_flag = architectural_visionary_personality_flag }
	if = { limit = { ruler_has_personality = scholar_personality } set_country_flag = scholar_personality_flag }
	if = { limit = { ruler_has_personality = entrepreneur_personality } set_country_flag = entrepreneur_personality_flag }
	if = { limit = { ruler_has_personality = industrious_personality } set_country_flag = industrious_personality_flag }
	if = { limit = { ruler_has_personality = expansionist_personality } set_country_flag = expansionist_personality_flag }
	if = { limit = { ruler_has_personality = charismatic_negotiator_personality } set_country_flag = charismatic_negotiator_personality_flag }
	if = { limit = { ruler_has_personality = conqueror_personality } set_country_flag = conqueror_personality_flag }
	if = { limit = { ruler_has_personality = silver_tongue_personality } set_country_flag = silver_tongue_personality_flag }
	if = { limit = { ruler_has_personality = tactical_genius_personality } set_country_flag = tactical_genius_personality_flag }
	if = { limit = { ruler_has_personality = bold_fighter_personality } set_country_flag = bold_fighter_personality_flag }
	if = { limit = { ruler_has_personality = strict_personality } set_country_flag = strict_personality_flag }
	if = { limit = { ruler_has_personality = inspiring_leader_personality } set_country_flag = inspiring_leader_personality_flag }
	if = { limit = { ruler_has_personality = martial_educator_personality } set_country_flag = martial_educator_personality_flag }
	if = { limit = { ruler_has_personality = navigator_personality } set_country_flag = navigator_personality_flag }
	if = { limit = { ruler_has_personality = fierce_negotiator_personality } set_country_flag = fierce_negotiator_personality_flag }
	if = { limit = { ruler_has_personality = babbling_buffoon_personality } set_country_flag = babbling_buffoon_personality_flag }
	if = { limit = { ruler_has_personality = embezzler_personality } set_country_flag = embezzler_personality_flag }
	if = { limit = { ruler_has_personality = infertile_personality } set_country_flag = infertile_personality_flag }
	if = { limit = { ruler_has_personality = drunkard_personality } set_country_flag = drunkard_personality_flag }
	if = { limit = { ruler_has_personality = sinner_personality } set_country_flag = sinner_personality_flag }
	if = { limit = { ruler_has_personality = greedy_personality } set_country_flag = greedy_personality_flag }
	if = { limit = { ruler_has_personality = cruel_personality } set_country_flag = cruel_personality_flag }
	if = { limit = { ruler_has_personality = craven_personality } set_country_flag = craven_personality_flag }
	if = { limit = { ruler_has_personality = naive_personality } set_country_flag = naive_personality_flag }
	if = { limit = { ruler_has_personality = loose_lips_personality } set_country_flag = loose_lips_personality_flag }
	if = { limit = { ruler_has_personality = obsessive_perfectionist_personality } set_country_flag = obsessive_perfectionist_personality_flag }
	if = { limit = { ruler_has_personality = malevolent_personality } set_country_flag = malevolent_personality_flag }
	if = { limit = { ruler_has_personality = legendary_pirate_personality } set_country_flag = legendary_pirate_personality_flag }
	if = { limit = { ruler_has_personality = humane_personality } set_country_flag = humane_personality_flag }
	if = { limit = { ruler_has_personality = petty_personality } set_country_flag = petty_personality_flag }
	if = { limit = { ruler_has_personality = reformist_personality } set_country_flag = reformist_personality_flag }
	if = { limit = { ruler_has_personality = patron_of_arts_personality } set_country_flag = patron_of_arts_personality_flag }
	}

clear_saved_persistent_ruler_personalities = {
	clr_country_flag = just_personality_flag
	clr_country_flag = righteous_personality_flag
	clr_country_flag = tolerant_personality_flag
	clr_country_flag = kind_hearted_personality_flag
	clr_country_flag = free_thinker_personality_flag
	clr_country_flag = well_connected_personality_flag
	clr_country_flag = calm_personality_flag
	clr_country_flag = careful_personality_flag
	clr_country_flag = secretive_personality_flag
	clr_country_flag = intricate_web_weaver_personality_flag
	clr_country_flag = fertile_personality_flag
	clr_country_flag = well_advised_personality_flag
	clr_country_flag = benevolent_personality_flag
	clr_country_flag = zealot_personality_flag
	clr_country_flag = pious_personality_flag
	clr_country_flag = lawgiver_personality_flag
	clr_country_flag = midas_touched_personality_flag
	clr_country_flag = incorruptible_personality_flag
	clr_country_flag = architectural_visionary_personality_flag
	clr_country_flag = scholar_personality_flag
	clr_country_flag = entrepreneur_personality_flag
	clr_country_flag = industrious_personality_flag
	clr_country_flag = expansionist_personality_flag
	clr_country_flag = charismatic_negotiator_personality_flag
	clr_country_flag = conqueror_personality_flag
	clr_country_flag = silver_tongue_personality_flag
	clr_country_flag = tactical_genius_personality_flag
	clr_country_flag = bold_fighter_personality_flag
	clr_country_flag = strict_personality_flag
	clr_country_flag = inspiring_leader_personality_flag
	clr_country_flag = martial_educator_personality_flag
	clr_country_flag = navigator_personality_flag
	clr_country_flag = fierce_negotiator_personality_flag
	clr_country_flag = babbling_buffoon_personality_flag
	clr_country_flag = embezzler_personality_flag
	clr_country_flag = infertile_personality_flag
	clr_country_flag = drunkard_personality_flag
	clr_country_flag = sinner_personality_flag
	clr_country_flag = greedy_personality_flag
	clr_country_flag = cruel_personality_flag
	clr_country_flag = craven_personality_flag
	clr_country_flag = naive_personality_flag
	clr_country_flag = loose_lips_personality_flag
	clr_country_flag = obsessive_perfectionist_personality_flag
	clr_country_flag = malevolent_personality_flag
	clr_country_flag = legendary_pirate_personality_flag
	clr_country_flag = humane_personality_flag
	clr_country_flag = petty_personality_flag
	clr_country_flag = reformist_personality_flag
	clr_country_flag = patron_of_arts_personality_flag
	clr_country_flag = mage_personality_flag
	clr_country_flag = great_conqueror_personality_flag
	clr_country_flag = mythical_conqueror_personality_flag
	clr_country_flag = xhazobs_chosen_personality_flag
	clr_country_flag = mongoose_shifter_personality_flag
	clr_country_flag = leopard_shifter_personality_flag
	clr_country_flag = elephant_shifter_personality_flag
}

apply_saved_persistent_ruler_personalities = {
	if = { limit = { has_country_flag = legendary_pirate_personality_flag } add_ruler_personality = legendary_pirate_personality clr_country_flag = legendary_pirate_personality_flag }
	if = { limit = { has_country_flag = legendary_pirate_personality_flag } add_ruler_personality = legendary_pirate_personality clr_country_flag = legendary_pirate_personality_flag }
	
	if = { limit = { has_country_flag = just_personality_flag } add_ruler_personality = just_personality clr_country_flag = just_personality_flag }
	if = { limit = { has_country_flag = righteous_personality_flag } add_ruler_personality = righteous_personality clr_country_flag = righteous_personality_flag }
	if = { limit = { has_country_flag = tolerant_personality_flag } add_ruler_personality = tolerant_personality clr_country_flag = tolerant_personality_flag }
	if = { limit = { has_country_flag = kind_hearted_personality_flag } add_ruler_personality = kind_hearted_personality clr_country_flag = kind_hearted_personality_flag }
	if = { limit = { has_country_flag = free_thinker_personality_flag } add_ruler_personality = free_thinker_personality clr_country_flag = free_thinker_personality_flag }
	if = { limit = { has_country_flag = well_connected_personality_flag } add_ruler_personality = well_connected_personality clr_country_flag = well_connected_personality_flag }
	if = { limit = { has_country_flag = calm_personality_flag } add_ruler_personality = calm_personality clr_country_flag = calm_personality_flag }
	if = { limit = { has_country_flag = careful_personality_flag } add_ruler_personality = careful_personality clr_country_flag = careful_personality_flag }
	if = { limit = { has_country_flag = secretive_personality_flag } add_ruler_personality = secretive_personality clr_country_flag = secretive_personality_flag }
	if = { limit = { has_country_flag = intricate_web_weaver_personality_flag } add_ruler_personality = intricate_web_weaver_personality clr_country_flag = intricate_web_weaver_personality_flag }
	if = { limit = { has_country_flag = fertile_personality_flag } add_ruler_personality = fertile_personality clr_country_flag = fertile_personality_flag }
	if = { limit = { has_country_flag = well_advised_personality_flag } add_ruler_personality = well_advised_personality clr_country_flag = well_advised_personality_flag }
	if = { limit = { has_country_flag = benevolent_personality_flag } add_ruler_personality = benevolent_personality clr_country_flag = benevolent_personality_flag }
	if = { limit = { has_country_flag = zealot_personality_flag } add_ruler_personality = zealot_personality clr_country_flag = zealot_personality_flag }
	if = { limit = { has_country_flag = pious_personality_flag } add_ruler_personality = pious_personality clr_country_flag = pious_personality_flag }
	if = { limit = { has_country_flag = lawgiver_personality_flag } add_ruler_personality = lawgiver_personality clr_country_flag = lawgiver_personality_flag }
	if = { limit = { has_country_flag = midas_touched_personality_flag } add_ruler_personality = midas_touched_personality clr_country_flag = midas_touched_personality_flag }
	if = { limit = { has_country_flag = incorruptible_personality_flag } add_ruler_personality = incorruptible_personality clr_country_flag = incorruptible_personality_flag }
	if = { limit = { has_country_flag = architectural_visionary_personality_flag } add_ruler_personality = architectural_visionary_personality clr_country_flag = architectural_visionary_personality_flag }
	if = { limit = { has_country_flag = scholar_personality_flag } add_ruler_personality = scholar_personality clr_country_flag = scholar_personality_flag }
	if = { limit = { has_country_flag = entrepreneur_personality_flag } add_ruler_personality = entrepreneur_personality clr_country_flag = entrepreneur_personality_flag }
	if = { limit = { has_country_flag = industrious_personality_flag } add_ruler_personality = industrious_personality clr_country_flag = industrious_personality_flag }
	if = { limit = { has_country_flag = expansionist_personality_flag } add_ruler_personality = expansionist_personality clr_country_flag = expansionist_personality_flag }
	if = { limit = { has_country_flag = charismatic_negotiator_personality_flag } add_ruler_personality = charismatic_negotiator_personality clr_country_flag = charismatic_negotiator_personality_flag }
	if = { limit = { has_country_flag = silver_tongue_personality_flag } add_ruler_personality = silver_tongue_personality clr_country_flag = silver_tongue_personality_flag }
	if = { limit = { has_country_flag = conqueror_personality_flag } add_ruler_personality = conqueror_personality clr_country_flag = conqueror_personality_flag }
	if = { limit = { has_country_flag = tactical_genius_personality_flag } add_ruler_personality = tactical_genius_personality clr_country_flag = tactical_genius_personality_flag }
	if = { limit = { has_country_flag = bold_fighter_personality_flag } add_ruler_personality = bold_fighter_personality clr_country_flag = bold_fighter_personality_flag }
	if = { limit = { has_country_flag = strict_personality_flag } add_ruler_personality = strict_personality clr_country_flag = strict_personality_flag }
	if = { limit = { has_country_flag = inspiring_leader_personality_flag } add_ruler_personality = inspiring_leader_personality clr_country_flag = inspiring_leader_personality_flag }
	if = { limit = { has_country_flag = martial_educator_personality_flag } add_ruler_personality = martial_educator_personality clr_country_flag = martial_educator_personality_flag }
	if = { limit = { has_country_flag = navigator_personality_flag } add_ruler_personality = navigator_personality clr_country_flag = navigator_personality_flag }
	if = { limit = { has_country_flag = fierce_negotiator_personality_flag } add_ruler_personality = fierce_negotiator_personality clr_country_flag = fierce_negotiator_personality_flag }
	if = { limit = { has_country_flag = babbling_buffoon_personality_flag } add_ruler_personality = babbling_buffoon_personality clr_country_flag = babbling_buffoon_personality_flag }
	if = { limit = { has_country_flag = embezzler_personality_flag } add_ruler_personality = embezzler_personality clr_country_flag = embezzler_personality_flag }
	if = { limit = { has_country_flag = infertile_personality_flag } add_ruler_personality = infertile_personality clr_country_flag = infertile_personality_flag }
	if = { limit = { has_country_flag = drunkard_personality_flag } add_ruler_personality = drunkard_personality clr_country_flag = drunkard_personality_flag }
	if = { limit = { has_country_flag = sinner_personality_flag } add_ruler_personality = sinner_personality clr_country_flag = sinner_personality_flag }
	if = { limit = { has_country_flag = greedy_personality_flag } add_ruler_personality = greedy_personality clr_country_flag = greedy_personality_flag }
	if = { limit = { has_country_flag = reformist_personality_flag } add_ruler_personality = reformist_personality clr_country_flag = reformist_personality_flag }
	if = { limit = { has_country_flag = cruel_personality_flag } add_ruler_personality = cruel_personality clr_country_flag = cruel_personality_flag }
	if = { limit = { has_country_flag = naive_personality_flag } add_ruler_personality = naive_personality clr_country_flag = naive_personality_flag }
	if = { limit = { has_country_flag = craven_personality_flag } add_ruler_personality = craven_personality clr_country_flag = craven_personality_flag }
	if = { limit = { has_country_flag = loose_lips_personality_flag } add_ruler_personality = loose_lips_personality clr_country_flag = loose_lips_personality_flag }
	if = { limit = { has_country_flag = obsessive_perfectionist_personality_flag } add_ruler_personality = obsessive_perfectionist_personality clr_country_flag = obsessive_perfectionist_personality_flag }
	if = { limit = { has_country_flag = malevolent_personality_flag } add_ruler_personality = malevolent_personality clr_country_flag = malevolent_personality_flag }
	if = { limit = { has_country_flag = humane_personality_flag } add_ruler_personality = humane_personality clr_country_flag = humane_personality_flag }
	if = { limit = { has_country_flag = petty_personality_flag } add_ruler_personality = petty_personality clr_country_flag = petty_personality_flag }
}

make_ruler_immortal = {
	custom_tooltip = ruler_becomes_immortal_tt
	set_ruler_flag = immortal_ruler
}




#monster hunting system
norscan_hunting_effect = {
	[[Track]
	random_list = {
		#success
		50 = {
			#ruler dip
			modifier = {
				factor = 0.8
				NOT = {
					dip = 2
				}
			}
			modifier = {
				factor = 1.25
				dip = 4
			}
			modifier = {
				factor = 1.25
				dip = 5
			}
			modifier = {
				factor = 1.5
				dip = 6
			}
			#ruler traits
			modifier = {
				factor = 1.2
				OR = {
					ruler_has_personality = free_thinker_personality
					ruler_has_personality = calm_personality
					ruler_has_personality = well_advised_personality
				}
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = careful_personality
			}
			modifier = {
				factor = 1.1
				OR = {
					ruler_has_personality = secretive_personality
					ruler_has_personality = intricate_web_weaver_personality
				}
			}
			modifier = {
				factor = 0.5
				ruler_has_personality = naive_personality
			}
			#general stats
			modifier = {
				factor = 1.1
				has_leader_with = {
					is_monarch_leader = yes
					manuever = 3
				}
			}
			modifier = {
				factor = 1.1
				has_leader_with = {
					is_monarch_leader = yes
					manuever = 4
				}
			}
			modifier = {
				factor = 1.2
				has_leader_with = {
					is_monarch_leader = yes
					manuever = 5
				}
			}
			modifier = {
				factor = 1.2
				has_leader_with = {
					is_monarch_leader = yes
					manuever = 6
				}
			}
			#advisors
			modifier = {
				factor = 1.2
				OR = {
					spymaster = 3
					army_organiser = 3
				}
			}
			modifier = {
				factor = 1.4
				OR = {
					spymaster = 4
					army_organiser = 4
				}
			}
			modifier = {
				factor = 1.7
				OR = {
					spymaster = 5
					army_organiser = 5
				}
			}
			set_ruler_flag = norscan_successful_tracking
			custom_tooltip = norscan_successful_tracking
			hidden_effect = {
				country_event = {
					id = religion_norscan_events.$ID$
					days = 30
					random = 10
				}
			}
		}
		#failure
		50 = {
			modifier = {
				factor = $Difficulty$
				always = yes
			}
			custom_tooltip = norscan_failed_tracking
			hidden_effect = {
				country_event = {
					id = religion_norscan_events.$ID$
					days = 60
					random = 30
				}
			}
		}
	}
	]
	[[Prep]
	random_list = {
		#success
		50 = {
			#ruler adm
			modifier = {
				factor = 0.8
				NOT = {
					adm = 2
				}
			}
			modifier = {
				factor = 1.25
				adm = 4
			}
			modifier = {
				factor = 1.25
				adm = 5
			}
			modifier = {
				factor = 1.5
				adm = 6
			}
			#ruler traits
			modifier = {
				factor = 1.2
				OR = {
					ruler_has_personality = free_thinker_personality
					ruler_has_personality = calm_personality
					ruler_has_personality = tolerant_personality
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					ruler_has_personality = industrious_personality
					ruler_has_personality = architectural_visionary_personality
				}
			}
			modifier = {
				factor = 0.5
				ruler_has_personality = obsessive_perfectionist_personality
			}
			#general stats
			modifier = {
				factor = 1.1
				has_leader_with = {
					is_monarch_leader = yes
					siege = 3
				}
			}
			modifier = {
				factor = 1.1
				has_leader_with = {
					is_monarch_leader = yes
					siege = 4
				}
			}
			modifier = {
				factor = 1.2
				has_leader_with = {
					is_monarch_leader = yes
					siege = 5
				}
			}
			modifier = {
				factor = 1.2
				has_leader_with = {
					is_monarch_leader = yes
					siege = 6
				}
			}
			#advisors
			modifier = {
				factor = 1.2
				OR = {
					natural_scientist = 3
					fortification_expert = 3
				}
			}
			modifier = {
				factor = 1.4
				OR = {
					natural_scientist = 4
					fortification_expert = 4
				}
			}
			modifier = {
				factor = 1.7
				OR = {
					natural_scientist = 5
					fortification_expert = 5
				}
			}
			set_ruler_flag = norscan_hunt_prep_success
			custom_tooltip = norscan_hunt_prep_success
			hidden_effect = {
				country_event = {
					id = religion_norscan_events.$ID$
					days = 30
					random = 10
				}
			}
		}
		#failure
		50 = {
			modifier = {
				factor = $Difficulty$
				always = yes
			}
			custom_tooltip = norscan_prep_failure
			hidden_effect = {
				country_event = {
					id = religion_norscan_events.$ID$
					days = 60
					random = 30
				}
			}
		}
	}
	]
	[[Slaying]
	random_list = {
		#success
		50 = {
			#slaying quest
			modifier = {
				factor = 1.3
				has_ruler_flag = norscan_hunt_prep_success
			}
			modifier = {
				factor = 1.3
				has_ruler_flag = norscan_successful_tracking
			}
			#ruler mil
			modifier = {
				factor = 0.7
				NOT = {
					mil = 2
				}
				#not having 1 is impossible
			}
			modifier = {
				factor = 1.25
				mil = 4
			}
			modifier = {
				factor = 1.25
				mil = 5
			}
			modifier = {
				factor = 1.5
				mil = 6
			}
			#ruler traits
			modifier = {
				factor = 1.3
				OR = {
					ruler_has_personality = inspiring_leader_personality
					ruler_has_personality = conqueror_personality
					ruler_has_personality = strict_personality
					ruler_has_personality = martial_educator_personality
				}
			}
			modifier = {
				factor = 1.6
				OR = {
					ruler_has_personality = tactical_genius_personality
					ruler_has_personality = bold_fighter_personality
				}
			}
			modifier = {
				factor = 0.5
				ruler_has_personality = craven_personality
			}
			#general stats
			modifier = {
				factor = 1.2
				has_leader_with = {
					is_monarch_leader = yes
					shock = 4
				}
			}
			modifier = {
				factor = 1.4
				has_leader_with = {
					is_monarch_leader = yes
					shock = 5
				}
			}
			modifier = {
				factor = 1.6
				has_leader_with = {
					is_monarch_leader = yes
					shock = 6
				}
			}
			country_event = {
				id = religion_norscan_events.102
			}
		}
		#failure
		50 = {
			modifier = {
				factor = $Difficulty$
				always = yes
			}
			country_event = {
				id = religion_norscan_events.103
			}
		}
	}
	]
	[[Reward]
	trigger_switch = {
		on_trigger = has_ruler_flag
		norscan_hunting_mammoth = {
			add_adm_power = 10
			add_dip_power = 10
			add_mil_power = 10
			add_splendor = 15
			if = {
				limit = {
					NOT = {
						has_country_flag = hunt_mammoth_trophy
					}
				}
				add_country_modifier = {
					name = "norscan_mammoth_trophy"
					duration = -1
				}
				set_country_flag = hunt_mammoth_trophy
			}
		}
		norscan_hunting_spawn = {
			add_adm_power = 30
			add_dip_power = 30
			add_mil_power = 30
			add_splendor = 25
			if = {
				limit = {
					NOT = {
						has_country_flag = hunt_spawn_trophy
					}
				}
				add_country_modifier = {
					name = "norscan_spawn_trophy"
					duration = -1
				}
				set_country_flag = hunt_spawn_trophy
			}
		}
		norscan_hunting_giant = {
			add_adm_power = 30
			add_dip_power = 30
			add_mil_power = 30
			add_splendor = 25
			if = {
				limit = {
					NOT = {
						has_country_flag = hunt_giant_trophy
					}
				}
				add_country_modifier = {
					name = "norscan_giant_trophy"
					duration = -1
				}
				set_country_flag = hunt_giant_trophy
			}
		}
	}
	]
	[[Clear]
	clr_ruler_flag = norscan_hunting_norsca
	clr_ruler_flag = norscan_hunting_spawn
	clr_ruler_flag = norscan_hunting_giant
	clr_ruler_flag = norscan_hunt_prep_success
	clr_ruler_flag = norscan_successful_tracking
	remove_country_modifier = norscan_monster_hunt
	]
}

#Empire's Religious Tensions System
add_religious_tension_effect = {
	custom_tooltip = add_$amount$_religious_tension_tt
	hidden_effect = {
		1 = {
			change_variable = {
				which = emp_religious_tension_counting_variable
				value = $amount$
			}
			if = {
				limit = {
					check_variable = {
						which = emp_religious_tension_counting_variable
						value = 100
					}
				}
				set_variable = {
					which = emp_religious_tension_counting_variable
					value = 100
				}
			}
			else_if = {
				limit = {
					NOT = {
						check_variable = {
							which = emp_religious_tension_counting_variable
							value = 0
						}
					}
				}
				set_variable = {
					which = emp_religious_tension_counting_variable
					value = 0
				}
			}
		}
		every_country = {
			limit = {
				OR = {
					has_country_modifier = emp_religious_tension_1
					has_country_modifier = emp_religious_tension_2
					has_country_modifier = emp_religious_tension_3
					has_country_modifier = emp_religious_tension_4
					has_country_modifier = emp_religious_tension_5
				}
			}
			remove_country_modifier = emp_religious_tension_1
			remove_country_modifier = emp_religious_tension_2
			remove_country_modifier = emp_religious_tension_3
			remove_country_modifier = emp_religious_tension_4
			remove_country_modifier = emp_religious_tension_5
		}
		if = {
			limit = {
				has_religious_tension = {
					amount = 100
				}
			}
			every_country = {
				limit = {
					is_part_of_hre = yes
				}
				add_country_modifier = {
					name = emp_religious_tension_5
					duration = -1
					desc = religious_tension_above_100_tt
				}
			}
		}
		else_if = {
			limit = {
				has_religious_tension = {
					amount = 75
				}
				NOT = {
					has_religious_tension = {
						amount = 100
					}
				}
			}
			every_country = {
				limit = {
					is_part_of_hre = yes
				}
				add_country_modifier = {
					name = emp_religious_tension_4
					duration = -1
					desc = religious_tension_above_75_tt
				}
			}
		}
		else_if = {
			limit = {
				has_religious_tension = {
					amount = 50
				}
				NOT = {
					has_religious_tension = {
						amount = 75
					}
				}
			}
			every_country = {
				limit = {
					is_part_of_hre = yes
				}
				add_country_modifier = {
					name = emp_religious_tension_3
					duration = -1
					desc = religious_tension_above_50_tt
				}
			}
		}
		else_if = {
			limit = {
				has_religious_tension = {
					amount = 25
				}
				NOT = {
					has_religious_tension = {
						amount = 50
					}
				}
			}
			every_country = {
				limit = {
					is_part_of_hre = yes
				}
				add_country_modifier = {
					name = emp_religious_tension_2
					duration = -1
					desc = religious_tension_above_25_tt
				}
			}
		}
		else = {
			every_country = {
				limit = {
					is_part_of_hre = yes
				}
				add_country_modifier = {
					name = emp_religious_tension_1
					duration = -1
					desc = religious_tension_below_25_tt
				}
			}
		}
	}
}

